!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.arithmetiny=n():t.arithmetiny=n()}(this,(function(){return(()=>{"use strict";var t={119:(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,n){this.evalChildren=function(t,n){for(var e=t.map((function(){return NaN})),r=0;r<t.length;r++){for(var o=t[r],a=o.toEval,i=0,u=o.children;i<u.length;i++){var l=u[i];if(e[r]=l.eval(a),!isNaN(e[r])){if(r+1===e.length)return n.apply(void 0,e);break}}if(isNaN(e[r]))return NaN}return NaN},this.regex=t,this.id=n}return t.IDENTIFIER_RE=/^ *([a-zA-Z_][\w]{0,31}) *$/,t}();n.default=e},221:function(t,n,e){var r,o=this&&this.__extends||(r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},r(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)});Object.defineProperty(n,"__esModule",{value:!0});var a=e(119),i=function(t){function n(n,e){var r=t.call(this,/^ *([a-zA-Z_][\w]{0,31})\(([+\-*/^%\w ,()]*)\) *$/,"FUNCTION")||this;if(r.fnContext=new Map([["ln",Math.log],["log",function(t,n){return Math.log(t)/Math.log(n)}],["sin",Math.sin],["cos",Math.cos],["tan",Math.tan],["sqrt",Math.sqrt],["abs",Math.abs]]),r.argsConflict=function(t,n){return t.length>1?t.length!==n:/^\s*$/.test(t[0])?0!==n:1!==n},r.eval=function(t){var n=r.regex.exec(t);if(n){var e=n[1],o=n[2],a=r.fnContext.get(e);if(a){var i=o.split(/ *, */);if(r.argsConflict(i,a.length))throw Error("Function ".concat(e," expected ").concat(a.length," argument(s), got ").concat(i.length));if(0===a.length)return a();var u=i.map((function(t){return{toEval:t,children:r.children}}));return r.evalChildren(u,a)}throw new Error('Function "'.concat(e,'" is not defined'))}return NaN},r.children=n,e)for(var o=0,i=e;o<i.length;o++){var u=i[o],l=u.name,f=u.fn;if(!a.default.IDENTIFIER_RE.test(l))throw new Error('Given function "'.concat(l,'" has an invalid identifier.'));r.fnContext.set(l,f)}return r}return o(n,t),n}(a.default);n.default=i},607:function(t,n,e){var r=this&&this.__awaiter||function(t,n,e,r){return new(e||(e=Promise))((function(o,a){function i(t){try{l(r.next(t))}catch(t){a(t)}}function u(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,u)}l((r=r.apply(t,n||[])).next())}))},o=this&&this.__generator||function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},a=this&&this.__spreadArray||function(t,n,e){if(e||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))};Object.defineProperty(n,"__esModule",{value:!0}),n.Arithmetiny=void 0;var i=e(221),u=e(59),l=e(603);n.Arithmetiny=function(t){var n=this;this.evaluate=function(t){return r(n,void 0,void 0,(function(){var n=this;return o(this,(function(e){return[2,Promise.resolve().then((function(){for(var e=0,r=n.levels[0];e<r.length;e++){var o=r[e].eval(t);if(!isNaN(o))return o}return NaN}))]}))}))},this.populateBinaryRules=function(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];e.forEach((function(e){e.addChildren.apply(e,a([1],t,!1)),e.addChildren.apply(e,a([2],n,!1))}))};var e=function(t){return t},f=/^ *(.+) *$/,c=new u.default(/^ *(.+) *\+ *(.+) *$/,(function(t,n){return t+n}),"ADD"),s=new u.default(/^ *(.+?) *\+ *(.+) *$/,(function(t,n){return t+n}),"ADD_RIGHT"),h=new u.default(/^ *(.+) *- *(.+) *$/,(function(t,n){return t-n}),"SUB"),p=new u.default(/^ *(.+?) *- *(.+) *$/,(function(t,n){return t-n}),"SUB_RIGHT"),d=new u.default(f,e,"AS_DOWN"),v=[c,s,h,p,d],y=new u.default(/^ *(.+) *\* *(.+) *$/,(function(t,n){return t*n}),"MULT"),_=new u.default(/^ *(.+?) *\* *(.+) *$/,(function(t,n){return t*n}),"MULT_RIGHT"),w=new u.default(/^ *(.+) *\/ *(.+) *$/,(function(t,n){return t/n}),"DIV"),g=new u.default(/^ *(.+?) *\/ *(.+) *$/,(function(t,n){return t/n}),"DIV_RIGHT"),b=new u.default(/^ *(.+) *% *(.+) *$/,(function(t,n){return t%n}),"MOD"),x=new u.default(/^ *(.+?) *% *(.+) *$/,(function(t,n){return t%n}),"MOD_RIGHT"),E=new u.default(f,e,"MMD_DOWN"),N=[y,_,w,g,b,x,E],M=new u.default(/^ *(.+) *\^ *(.+) *$/,Math.pow,"EXP"),O=new u.default(/^ *(.+?) *\^ *(.+) *$/,Math.pow,"EXP_RIGHT"),C=new u.default(f,e,"EXP_DOWN"),I=[M,O,C],R=new u.default(/^ *\((.+)\) *$/,e,"PAREN"),$=new u.default(/^ *-(.+) *$/,(function(t){return-t}),"NEGATIVE"),P=[R,$,new u.default(/^ *?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)? *$/,e,"NUMBER"),new l.default(t&&t.vars),new i.default(v,t&&t.functions)];this.populateBinaryRules(v,N,c,s,h,p),d.addChildren.apply(d,a([1],N,!1)),this.populateBinaryRules(N,I,y,_,w,g,b,x),E.addChildren.apply(E,a([1],I,!1)),this.populateBinaryRules(P,I,M,O),C.addChildren.apply(C,a([1],P,!1)),R.addChildren.apply(R,a([1],v,!1)),$.addChildren.apply($,a([1],v,!1)),this.levels=[v,N,I,P]}},59:function(t,n,e){var r,o=this&&this.__extends||(r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},r(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)});Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){function n(n,e,r){var o=t.call(this,n,r)||this;return o.addChildren=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];o.children.push({groupInd:t,children:n})},o.eval=function(t){var n=o.regex.exec(t);if(n){if(0===o.children.length)return+t;var e=o.children.map((function(t){var e=t.children,r=t.groupInd;return{children:e,toEval:n[r]}}));return o.evalChildren(e,o.fn)}return NaN},o.children=[],o.fn=e,o}return o(n,t),n}(e(119).default);n.default=a},603:function(t,n,e){var r,o=this&&this.__extends||(r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},r(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)});Object.defineProperty(n,"__esModule",{value:!0});var a=e(119),i=function(t){function n(n){var e=t.call(this,a.default.IDENTIFIER_RE,"VAR")||this;if(e.varContext=new Map([["e",Math.E],["pi",Math.PI]]),e.eval=function(t){var n=e.regex.exec(t);if(n){var r=e.varContext.get(n[1]);if(void 0!==r)return r;throw new Error('Variable "'.concat(n[1],'" is not defined.'))}return NaN},n)for(var r=0,o=n;r<o.length;r++){var i=o[r],u=i.name,l=i.value;if(!e.regex.test(u))throw new Error('Given variable "'.concat(u,'" has an invalid identifier.'));e.varContext.set(u,l)}return e}return o(n,t),n}(a.default);n.default=i}},n={};return function e(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={exports:{}};return t[r].call(a.exports,a,a.exports,e),a.exports}(607)})()}));